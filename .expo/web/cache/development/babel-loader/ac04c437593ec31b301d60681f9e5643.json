{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\USUARIO\\\\source\\\\repos\\\\dualtech-diunsa_consultaArticulosApp\\\\src\\\\screens\\\\ConsultaArticuloScreen.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Layout, TopNavigation, Divider, Input, Text, Card, Avatar } from \"@ui-kitten/components\";\nimport { styles } from \"../theme/appTheme\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { showMessage } from \"react-native-flash-message\";\nimport { trackPromise } from \"react-promise-tracker\";\nimport { addZeroes } from \"../helpers/functions/shared\";\nimport { fetchConsultaArticulos } from \"../helpers/api\";\nimport * as Device from \"expo-device\";\nimport { SyncIndicator } from \"../components/shared/SyncIndicator\";\nvar CODIGO_BARRA = \"codigoBarra\";\nvar initialValues = {\n  codigoBarra: \"\"\n};\nexport var ConsultaArticuloScreen = function ConsultaArticuloScreen(_ref) {\n  var _articulo$precioAhorr, _loading;\n\n  _objectDestructuringEmpty(_ref);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      articulo = _useState2[0],\n      setArticulo = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var codigoBarraInput = useRef(null);\n  useEffect(function () {\n    setLoading(false);\n    codigoBarraInput.current.focus();\n  }, []);\n  var entradaValidationSchema = Yup.object({\n    codigoBarra: Yup.string().required(\"Escanee el código de barra.\")\n  });\n\n  var consultarArticulo = function consultarArticulo(codigoBarra) {\n    var _Device$deviceName;\n\n    var macAddress, response;\n    return _regeneratorRuntime.async(function consultarArticulo$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            macAddress = (_Device$deviceName = Device.deviceName) != null ? _Device$deviceName : \"\";\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fetchConsultaArticulos.get(codigoBarra, macAddress));\n\n          case 3:\n            response = _context.sent;\n            return _context.abrupt(\"return\", response);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var _useFormik = useFormik({\n    initialValues: initialValues,\n    onSubmit: function onSubmit(model) {\n      var err, _ref2, _err$response$data$er, statusCode, errorMsg;\n\n      return _regeneratorRuntime.async(function onSubmit$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setArticulo(null);\n              setLoading(true);\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(trackPromise(consultarArticulo(model.codigoBarra).then(function (artResponse) {\n                setArticulo(artResponse);\n              })));\n\n            case 5:\n              _context2.next = 27;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              err = _context2.t0;\n\n              if (!err.response) {\n                _context2.next = 26;\n                break;\n              }\n\n              statusCode = err.response.status;\n              errorMsg = (_ref2 = (_err$response$data$er = err.response.data.error) != null ? _err$response$data$er : err.response.data) != null ? _ref2 : \"Error desconocido.\";\n              _context2.t1 = statusCode;\n              _context2.next = _context2.t1 === 500 ? 16 : _context2.t1 === 400 ? 18 : _context2.t1 === 404 ? 20 : 22;\n              break;\n\n            case 16:\n              showMessage({\n                message: errorMsg,\n                description: \"Error: \" + statusCode + \" (Internal Server Error)\",\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000\n              });\n              return _context2.abrupt(\"break\", 24);\n\n            case 18:\n              showMessage({\n                message: errorMsg,\n                description: \"Error: \" + statusCode + \" (Bad Request)\",\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000\n              });\n              return _context2.abrupt(\"break\", 24);\n\n            case 20:\n              showMessage({\n                message: errorMsg,\n                description: \"Error: \" + statusCode + \" (Not Found)\",\n                type: \"warning\",\n                animated: true,\n                floating: true,\n                icon: \"warning\",\n                duration: 5000\n              });\n              return _context2.abrupt(\"break\", 24);\n\n            case 22:\n              showMessage({\n                message: errorMsg,\n                description: \"NETWORK ERROR\",\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000\n              });\n              return _context2.abrupt(\"break\", 24);\n\n            case 24:\n              _context2.next = 27;\n              break;\n\n            case 26:\n              showMessage({\n                message: \"Error de conexión al API.\",\n                description: \"NETWORK ERROR\",\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000\n              });\n\n            case 27:\n              _context2.prev = 27;\n              setLoading(false);\n              setFieldValue(CODIGO_BARRA, \"\");\n              codigoBarraInput.current.focus();\n              return _context2.finish(27);\n\n            case 32:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 7, 27, 32]], Promise);\n    },\n    validationSchema: entradaValidationSchema\n  }),\n      handleSubmit = _useFormik.handleSubmit,\n      handleChange = _useFormik.handleChange,\n      values = _useFormik.values,\n      errors = _useFormik.errors,\n      isValid = _useFormik.isValid,\n      handleBlur = _useFormik.handleBlur,\n      setFieldValue = _useFormik.setFieldValue,\n      resetForm = _useFormik.resetForm;\n\n  var renderRightActions = function renderRightActions() {\n    return React.createElement(React.Fragment, null);\n  };\n\n  var renderTitle = function renderTitle() {\n    return React.createElement(View, {\n      style: styles.titleContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 5\n      }\n    }, React.createElement(Avatar, {\n      shape: \"rounded\",\n      size: \"giant\",\n      style: styles.logo,\n      source: require(\"../../assets/diunsa_logo.png\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }\n    }), React.createElement(TopNavigation, {\n      title: \"Consulta de Art\\xEDculos\",\n      subtitle: \"V 21.01.2022\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  var titleFooter = function titleFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 5,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 7\n      }\n    }, \"Cod. \" + (articulo == null ? void 0 : articulo.codigoArticulo)));\n  };\n\n  var precioFooter = function precioFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 5,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }, \"Precio Normal\"));\n  };\n\n  var precioOfertaFooter = function precioOfertaFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 5,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 7\n      }\n    }, \"Precio Oferta\"));\n  };\n\n  var precioAhorroMasFooter = function precioAhorroMasFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 10,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 7\n      }\n    }, \"Ahorro Mas\"));\n  };\n\n  var precioCrediDiunsaFooter = function precioCrediDiunsaFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 10,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 7\n      }\n    }, \"Precio Credidiunsa\"));\n  };\n\n  var cuotaCrediDiunsaNormalFooter = function cuotaCrediDiunsaNormalFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 10,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }\n    }, \"Cuota Credidiunsa\"));\n  };\n\n  var cuotaCrediDiunsaVIPFooter = function cuotaCrediDiunsaVIPFooter() {\n    return React.createElement(View, {\n      style: {\n        paddingVertical: 10,\n        paddingHorizontal: 25\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      appearance: \"hint\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 7\n      }\n    }, \"Cuota VIP\"));\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.flex,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 5\n    }\n  }, React.createElement(TopNavigation, {\n    title: renderTitle,\n    accessoryRight: renderRightActions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }\n  }), React.createElement(Divider, {\n    style: styles.dividerColor,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }), React.createElement(Layout, {\n    style: {\n      padding: 18\n    },\n    level: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }\n  }, React.createElement(Input, {\n    style: styles.formikInput,\n    autoCapitalize: \"characters\",\n    placeholder: \"C\\xF3digo de barra\",\n    value: values.codigoBarra,\n    onChangeText: handleChange(CODIGO_BARRA),\n    onBlur: handleBlur(CODIGO_BARRA),\n    showSoftInputOnFocus: false,\n    returnKeyType: \"next\",\n    ref: codigoBarraInput,\n    onSubmitEditing: handleSubmit,\n    disabled: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }\n  }), errors.codigoBarra && React.createElement(Text, {\n    style: styles.errorText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 11\n    }\n  }, errors.codigoBarra)), React.createElement(Layout, {\n    level: articulo ? \"4\" : \"1\",\n    style: styles.flex,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }\n  }, React.createElement(SyncIndicator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }), articulo ? React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: [{\n      flexDirection: \"row\",\n      alignContent: \"center\",\n      marginHorizontal: 20\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      width: \"50%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  }, React.createElement(Card, {\n    style: {\n      marginTop: 5\n    },\n    footer: titleFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    category: \"s1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 19\n    }\n  }, articulo == null ? void 0 : articulo.descripcion))), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 15\n    }\n  }, React.createElement(Card, {\n    style: {\n      marginTop: 5,\n      marginHorizontal: 10\n    },\n    footer: precioFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    category: \"h6\",\n    status: \"basic\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 19\n    }\n  }, addZeroes(articulo == null ? void 0 : articulo.precioNormal)))), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, React.createElement(Card, {\n    style: {\n      marginTop: 5,\n      marginHorizontal: 0\n    },\n    footer: precioOfertaFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    category: \"h6\",\n    status: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 19\n    }\n  }, addZeroes(articulo == null ? void 0 : articulo.precioOferta))))), React.createElement(Card, {\n    style: {\n      marginTop: 5,\n      marginHorizontal: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 13\n    }\n  }, !(articulo != null && articulo.imagenUrl) ? React.createElement(View, {\n    style: {\n      alignItems: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 17\n    }\n  }, React.createElement(Image, {\n    source: require(\"../../assets/nopic.png\"),\n    style: {\n      height: 180,\n      resizeMode: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 19\n    }\n  })) : React.createElement(Image, {\n    source: {\n      uri: articulo == null ? void 0 : articulo.imagenUrl\n    },\n    style: {\n      height: articulo.descripcion.length > 42 ? 180 : 200,\n      resizeMode: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 17\n    }\n  })), React.createElement(Text, {\n    category: \"s1\",\n    style: {\n      textAlign: \"center\",\n      marginTop: 2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }\n  }, \"Las cuotas de CrediDiunsa son a 36 meses.\"), React.createElement(View, {\n    style: [{\n      flexDirection: \"row\",\n      alignContent: \"center\",\n      marginHorizontal: 20\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, (articulo == null ? void 0 : articulo.precioAhorroMas) !== 0 && React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 17\n    }\n  }, React.createElement(Card, {\n    style: {\n      marginTop: 5\n    },\n    footer: precioAhorroMasFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    category: \"h6\",\n    status: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 21\n    }\n  }, addZeroes((_articulo$precioAhorr = articulo == null ? void 0 : articulo.precioAhorroMas) != null ? _articulo$precioAhorr : 0)))), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 15\n    }\n  }, React.createElement(Card, {\n    style: {\n      marginTop: 5,\n      marginHorizontal: 5\n    },\n    footer: precioCrediDiunsaFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    category: \"h6\",\n    style: {\n      color: \"#ff8c00\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 19\n    }\n  }, addZeroes((articulo == null ? void 0 : articulo.precioCrediDiunsa) === 0 ? articulo == null ? void 0 : articulo.precioOferta : articulo == null ? void 0 : articulo.precioCrediDiunsa)))), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 15\n    }\n  }, React.createElement(Card, {\n    style: {\n      marginTop: 5,\n      marginRight: 5\n    },\n    footer: cuotaCrediDiunsaNormalFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    category: \"h6\",\n    style: {\n      color: \"#E47D00\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 19\n    }\n  }, addZeroes(articulo == null ? void 0 : articulo.cuotaCrediDiunsaNormal))))), React.createElement(Text, {\n    category: \"s1\",\n    style: {\n      textAlign: \"center\",\n      marginTop: 5\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 13\n    }\n  }, \"Todos los precios incluyen ISV\")) : (_loading = !loading) != null ? _loading : React.createElement(Text, {\n    category: \"s1\",\n    style: {\n      textAlign: \"center\",\n      marginTop: 5\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 13\n    }\n  }, \"Debe escanear o ingresar el c\\xF3digo de barra.\")));\n};","map":{"version":3,"sources":["C:/Users/USUARIO/source/repos/dualtech-diunsa_consultaArticulosApp/src/screens/ConsultaArticuloScreen.tsx"],"names":["React","useState","useRef","useEffect","useFormik","Yup","SafeAreaView","Layout","TopNavigation","Divider","Input","Text","Card","Avatar","styles","showMessage","trackPromise","addZeroes","fetchConsultaArticulos","Device","SyncIndicator","CODIGO_BARRA","initialValues","codigoBarra","ConsultaArticuloScreen","articulo","setArticulo","loading","setLoading","codigoBarraInput","current","focus","entradaValidationSchema","object","string","required","consultarArticulo","macAddress","deviceName","get","response","onSubmit","model","then","artResponse","err","statusCode","status","errorMsg","data","error","message","description","type","animated","floating","icon","duration","setFieldValue","validationSchema","handleSubmit","handleChange","values","errors","isValid","handleBlur","resetForm","renderRightActions","renderTitle","titleContainer","logo","require","titleFooter","paddingVertical","paddingHorizontal","codigoArticulo","precioFooter","precioOfertaFooter","precioAhorroMasFooter","precioCrediDiunsaFooter","cuotaCrediDiunsaNormalFooter","cuotaCrediDiunsaVIPFooter","flex","dividerColor","padding","formikInput","errorText","flexDirection","alignContent","marginHorizontal","width","marginTop","descripcion","precioNormal","precioOferta","imagenUrl","alignItems","height","resizeMode","uri","length","textAlign","precioAhorroMas","color","precioCrediDiunsa","marginRight","cuotaCrediDiunsaNormal"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { DrawerScreenProps } from \"@react-navigation/drawer\";\nimport {\n  Layout,\n  TopNavigation,\n  Divider,\n  Button,\n  Input,\n  Text,\n  Card,\n  Avatar,\n} from \"@ui-kitten/components\";\nimport { styles } from \"../theme/appTheme\";\nimport { IConsultaArticulo } from \"../models/IConsultaArticulo\";\nimport { IArticulo } from \"../models/IArticulo\";\nimport { View, Image } from \"react-native\";\nimport { showMessage } from \"react-native-flash-message\";\nimport { trackPromise } from \"react-promise-tracker\";\nimport { addZeroes } from \"../helpers/functions/shared\";\nimport { fetchConsultaArticulos } from \"../helpers/api\";\nimport { AxiosError } from \"axios\";\nimport * as Device from \"expo-device\";\nimport { SyncIndicator } from \"../components/shared/SyncIndicator\";\nimport articuloTest from \"../data/artituloTest\";\n\ninterface Props extends DrawerScreenProps<any, any> {}\n\nconst CODIGO_BARRA = \"codigoBarra\";\n\nconst initialValues: IConsultaArticulo = {\n  codigoBarra: \"\",\n};\n\nexport const ConsultaArticuloScreen = ({}: Props) => {\n  const [articulo, setArticulo] = useState<IArticulo | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const codigoBarraInput = useRef<Input>(null);\n\n  useEffect(() => {\n    setLoading(false);\n    codigoBarraInput.current!.focus();\n  }, []);\n\n  const entradaValidationSchema: Yup.SchemaOf<IConsultaArticulo> = Yup.object({\n    codigoBarra: Yup.string().required(\"Escanee el código de barra.\"),\n  });\n\n  const consultarArticulo = async (codigoBarra: string): Promise<IArticulo> => {\n    var macAddress = Device.deviceName ?? \"\";\n    var response = await fetchConsultaArticulos.get(codigoBarra, macAddress);\n\n    return response;\n  };\n\n  // const consultarArticulo = async () => {\n  //   const setTimeoutPromise = (timeout: number) => {\n  //     return new Promise((resolve) => setTimeout(resolve, timeout));\n  //   };\n  //   await setTimeoutPromise(3000);\n  //   return Promise.resolve(articuloTest);\n  // };\n\n  const {\n    handleSubmit,\n    handleChange,\n    values,\n    errors,\n    isValid,\n    handleBlur,\n    setFieldValue,\n    resetForm,\n  } = useFormik<IConsultaArticulo>({\n    initialValues: initialValues,\n    onSubmit: async (model: IConsultaArticulo) => {\n      try {\n        setArticulo(null);\n        setLoading(true);\n        await trackPromise(\n          consultarArticulo(model.codigoBarra).then((artResponse) => {\n            setArticulo(artResponse);\n          })\n        );\n      } catch (error) {\n        const err = error as AxiosError;\n        if (err.response) {\n          var statusCode = err.response.status;\n          var errorMsg =\n            err.response.data.error ??\n            err.response.data ??\n            \"Error desconocido.\";\n\n          switch (statusCode) {\n            case 500:\n              showMessage({\n                message: errorMsg,\n                description: `Error: ${statusCode} (Internal Server Error)`,\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000,\n              });\n              break;\n\n            case 400:\n              showMessage({\n                message: errorMsg,\n                description: `Error: ${statusCode} (Bad Request)`,\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000,\n              });\n              break;\n\n            case 404:\n              showMessage({\n                message: errorMsg,\n                description: `Error: ${statusCode} (Not Found)`,\n                type: \"warning\",\n                animated: true,\n                floating: true,\n                icon: \"warning\",\n                duration: 5000,\n              });\n              break;\n\n            default:\n              showMessage({\n                message: errorMsg,\n                description: \"NETWORK ERROR\",\n                type: \"danger\",\n                animated: true,\n                floating: true,\n                icon: \"danger\",\n                duration: 5000,\n              });\n              break;\n          }\n        } else {\n          showMessage({\n            message: \"Error de conexión al API.\",\n            description: \"NETWORK ERROR\",\n            type: \"danger\",\n            animated: true,\n            floating: true,\n            icon: \"danger\",\n            duration: 5000,\n          });\n        }\n      } finally {\n        setLoading(false);\n        setFieldValue(CODIGO_BARRA, \"\");\n        codigoBarraInput.current!.focus();\n      }\n    },\n    validationSchema: entradaValidationSchema,\n  });\n\n  const renderRightActions = () => (\n    <></>\n    // <View style={{ flexDirection: \"row\" }}>\n    //   <Button\n    //     size=\"small\"\n    //     appearance=\"outline\"\n    //     onPress={() => {\n    //       setArticulo(null);\n    //       resetForm();\n    //     }}\n    //     disabled={loading}\n    //   >\n    //     Limpiar\n    //   </Button>\n    //   <Button\n    //     size=\"small\"\n    //     onPress={handleSubmit as (values: any) => void}\n    //     disabled={loading}\n    //   >\n    //     Consultar\n    //   </Button>\n    // </View>\n  );\n\n  const renderTitle = () => (\n    <View style={styles.titleContainer}>\n      <Avatar\n        shape=\"rounded\"\n        size=\"giant\"\n        style={styles.logo}\n        source={require(\"../../assets/diunsa_logo.png\")}\n      />\n      <TopNavigation title=\"Consulta de Artículos\" subtitle=\"V 21.01.2022\" />\n    </View>\n  );\n\n  const titleFooter = () => (\n    <View style={{ paddingVertical: 5, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">{`Cod. ${articulo?.codigoArticulo}`}</Text>\n    </View>\n  );\n\n  const precioFooter = () => (\n    <View style={{ paddingVertical: 5, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">Precio Normal</Text>\n    </View>\n  );\n\n  const precioOfertaFooter = () => (\n    <View style={{ paddingVertical: 5, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">Precio Oferta</Text>\n    </View>\n  );\n\n  const precioAhorroMasFooter = () => (\n    <View style={{ paddingVertical: 10, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">Ahorro Mas</Text>\n    </View>\n  );\n\n  const precioCrediDiunsaFooter = () => (\n    <View style={{ paddingVertical: 10, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">Precio Credidiunsa</Text>\n    </View>\n  );\n\n  const cuotaCrediDiunsaNormalFooter = () => (\n    <View style={{ paddingVertical: 10, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">Cuota Credidiunsa</Text>\n    </View>\n  );\n\n  const cuotaCrediDiunsaVIPFooter = () => (\n    <View style={{ paddingVertical: 10, paddingHorizontal: 25 }}>\n      <Text appearance=\"hint\">Cuota VIP</Text>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.flex}>\n      <TopNavigation title={renderTitle} accessoryRight={renderRightActions} />\n      <Divider style={styles.dividerColor} />\n      <Layout style={{ padding: 18 }} level=\"1\">\n        <Input\n          style={styles.formikInput}\n          autoCapitalize=\"characters\"\n          placeholder=\"Código de barra\"\n          value={values.codigoBarra}\n          onChangeText={handleChange(CODIGO_BARRA)}\n          onBlur={handleBlur(CODIGO_BARRA)}\n          showSoftInputOnFocus={false}\n          returnKeyType=\"next\"\n          ref={codigoBarraInput}\n          onSubmitEditing={handleSubmit as (values: any) => void}\n          disabled={loading}\n        />\n        {errors.codigoBarra && (\n          <Text style={styles.errorText}>{errors.codigoBarra}</Text>\n        )}\n      </Layout>\n\n      <Layout level={articulo ? \"4\" : \"1\"} style={styles.flex}>\n        <SyncIndicator />\n        {articulo ? (\n          <View>\n            <View\n              style={[\n                {\n                  flexDirection: \"row\",\n                  alignContent: \"center\",\n                  marginHorizontal: 20,\n                },\n              ]}\n            >\n              <View style={{ width: \"50%\" }}>\n                <Card style={{ marginTop: 5 }} footer={titleFooter}>\n                  <Text category=\"s1\">{articulo?.descripcion}</Text>\n                </Card>\n              </View>\n              <View style={{ flex: 1 }}>\n                <Card\n                  style={{ marginTop: 5, marginHorizontal: 10 }}\n                  footer={precioFooter}\n                >\n                  <Text category=\"h6\" status=\"basic\">\n                    {addZeroes(articulo?.precioNormal)}\n                  </Text>\n                </Card>\n              </View>\n              <View style={{ flex: 1 }}>\n                <Card\n                  style={{ marginTop: 5, marginHorizontal: 0 }}\n                  footer={precioOfertaFooter}\n                >\n                  <Text category=\"h6\" status=\"danger\">\n                    {addZeroes(articulo?.precioOferta)}\n                  </Text>\n                </Card>\n              </View>\n            </View>\n\n            <Card\n              style={{\n                marginTop: 5,\n                marginHorizontal: 20,\n              }}\n            >\n              {!articulo?.imagenUrl ? (\n                <View style={{ alignItems: \"center\" }}>\n                  <Image\n                    source={require(\"../../assets/nopic.png\")}\n                    style={{\n                      height: 180,\n                      resizeMode: \"center\",\n                    }}\n                  />\n                </View>\n              ) : (\n                <Image\n                  source={{\n                    uri: articulo?.imagenUrl,\n                  }}\n                  style={{\n                    height: articulo.descripcion.length > 42 ? 180 : 200,\n                    resizeMode: \"center\",\n                  }}\n                />\n              )}\n            </Card>\n\n            <Text category=\"s1\" style={{ textAlign: \"center\", marginTop: 2 }}>\n              Las cuotas de CrediDiunsa son a 36 meses.\n            </Text>\n\n            <View\n              style={[\n                {\n                  flexDirection: \"row\",\n                  alignContent: \"center\",\n                  marginHorizontal: 20,\n                },\n              ]}\n            >\n              {articulo?.precioAhorroMas !== 0 && (\n                <View style={{ flex: 1 }}>\n                  <Card style={{ marginTop: 5 }} footer={precioAhorroMasFooter}>\n                    <Text category=\"h6\" status=\"primary\">\n                      {addZeroes(articulo?.precioAhorroMas ?? 0)}\n                    </Text>\n                  </Card>\n                </View>\n              )}\n              <View style={{ flex: 1 }}>\n                <Card\n                  style={{ marginTop: 5, marginHorizontal: 5 }}\n                  footer={precioCrediDiunsaFooter}\n                >\n                  <Text category=\"h6\" style={{ color: \"#ff8c00\" }}>\n                    {addZeroes(\n                      articulo?.precioCrediDiunsa === 0\n                        ? articulo?.precioOferta\n                        : articulo?.precioCrediDiunsa\n                    )}\n                  </Text>\n                </Card>\n              </View>\n              <View style={{ flex: 1 }}>\n                <Card\n                  style={{ marginTop: 5, marginRight: 5 }}\n                  footer={cuotaCrediDiunsaNormalFooter}\n                >\n                  <Text category=\"h6\" style={{ color: \"#E47D00\" }}>\n                    {addZeroes(articulo?.cuotaCrediDiunsaNormal)}\n                  </Text>\n                </Card>\n              </View>\n              {/* <View style={{ flex: 1 }}>\n                <Card\n                  style={{ marginTop: 5 }}\n                  footer={cuotaCrediDiunsaVIPFooter}\n                >\n                  <Text category=\"s1\" style={{ color: \"#efb810\" }}>\n                    {addZeroes(articulo?.cuotaCrediDiunsaVIP)}\n                  </Text>\n                </Card>\n              </View> */}\n            </View>\n            <Text category=\"s1\" style={{ textAlign: \"center\", marginTop: 5 }}>\n              Todos los precios incluyen ISV\n            </Text>\n          </View>\n        ) : (\n          !loading ?? (\n            <Text category=\"s1\" style={{ textAlign: \"center\", marginTop: 5 }}>\n              Debe escanear o ingresar el código de barra.\n            </Text>\n          )\n        )}\n      </Layout>\n    </SafeAreaView>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}